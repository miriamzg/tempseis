 <!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (X11; I; SunOS 5.6 sun4u) [Netscape]">
   <title>S-plot guide </title>
</head>
<A NAME="top"></A>
<body text="#000000" background="Images/parchr.gif" LINK = "#660000"  ALINK ="#AA4400" VLINK="#AA044"> 
<table>
<tr>
<td valign="top" WIDTH=120>
<a href="http://online.anu.edu.au/">
<IMG ALIGN=LEFT  SRC="Images/anu.gif" border=0 alt="ANU online"></a> </p>
<p>&nbsp;</p><P>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<a href="http://wwwrses.anu.edu.au/">
<img src="Images/testrses.gif" border=0 alt="RSES Home Page"></A>
<p>
<FONT FACE="Georgia, Verdana, Arial, Helvetica" >


<HR WIDTH=95% SIZE=1 SHADE align=left>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#top">Top </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#IO">Input/Output </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#examples">Examples </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#refs">References </a>
<p>
 <HR WIDTH=75% SIZE=1 SHADE align=left>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#top">Top </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#IO">Input/Output </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#examples">Examples </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#refs">References </a>
<p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#top">Top </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#IO">Input/Output </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#examples">Examples </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#refs">References </a>
<p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#top">Top </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#IO">Input/Output </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#examples">Examples </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#refs">References </a>
<p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<br>&nbsp;<p>&nbsp;</p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#top">Top </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#IO">Input/Output </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#examples">Examples </a>
<p>
<IMG SRC="Images/purcube.gif" BORDER=0 ALT="" WIDTH=7 HEIGHT=7>&nbsp;
<A href="#refs">References </a>
<p>
</font>
</td>

<td valign="top">
&#160;&#160;&#160;&#160;&#160;&#160;

</td>
<td valign="top">

<HTML>

<BODY BGCOLOR="#FFFFFF">
<IMG SRC="Images/colorbar.gif" ALT="-----">
<H1>S-plot guide</H1>
<p>
</b>This program produces X or postscript plots of 
the points (models) in parameter space generated by a neighbourhood algorithm.
It reads the models from the NAD direct access file produced by 
the program <i> NA-sampler </i> and plots the scatter of points
projected on to planes defined by selected pairs of variables. 
<p>

<A NAME="install"></A>
<IMG SRC="Images/colorbar.gif" ALT="-----">
<p>
To compile type
<p>
<tt>> make all </tt>
<p>
in splot home directory. Note that splot is compiled automatically when 
<tt>`make all'</tt> is typed in the main <tt>src</tt> directory. The executables
are placed in the <tt>bin</tt> directory. 
<p>
To execute type
<p>
<tt> splot-x </tt> (or <tt> splot-p</tt>) <tt>(-g)</tt> <br>
<p>
for X, or Postscript in the <tt>data/splot</tt> directory.
<p>
The <tt>-g</tt> is optional, and produces a discretized version
of the plot, rather than plotting each model as a coloured dot.
This is useful if the number of models (dots) is large (e.g. > 15000).
The discretization interval is controlled by the dot radius
obtained from splot.cmd.

<p>
The discretized version is much quicker in X and produces much
smaller postscript files. The disadvantage is that one can no longer
see the chronological progression of the sampling on the screen,
which can give a useful impression of how the sampling varies 
as a function of iteration. </p>

<p>
<b> Note that the X-graphics version may crash if netscape
is running because of a conflict in colour tables. 
</b>
<p>
<A NAME="IO"></A>
<IMG SRC="Images/colorbar.gif" ALT="-----">
<p>
Input files:
<ul>
<i> na.nad</i> - NAD format direct access file containing the 
multidimensional points (models) to be plotted. (Must be present.)
The NAD format stands for neighbourhood algorithm direct access file,
and is described 
<a href="./nad.html">here</a>.
<p>
<i> splot.cmd</i> - contains main control parameters for plot. (Must be present.)
<br>
(See example file for explanation of entries.) 
<p>
<i> ranges.in</i> - contains upper and lower limits for each parameter,
and other parameters which control appearance of axes. (Must be present.)
<br>
(See example file for explanation of entries.) 
<p>
<i> pal.in </i> - defines colour of pens in RGB (must be present). <br>
(See example file for explanation of entries.)
<p>
<i> model.ref </i> - defines a reference model to be plotted on top of
scatter (optional file). A reference model is not plotted if model.ref
 is not present, or the pen colour for the reference model read in 
from splot.cmd is < 0. 
<p>
<i> finetune </i> - contains increments in cm for nudging the axes annotation
and labels in a postscript plot. The file is optional and is only read 
in by postscript version <i>splot-p</i>. (See example file for details.)
<p>
</ul>
Output files:
<ul>
<i> splot.ps</i> - Postscript file of plot (only if splot-p is used).
<p>
splot-x sends plot to screen.
<p>
</ul>
<A NAME="examples"></A>
<IMG SRC="Images/colorbar.gif" ALT="-----">
<h3>Examples</h3>
<p>
An example NAD file is provided which has 10020 models in a 24-dimensional
space. Example splot.cmd files are provided in directory <tt> splot/cmds </tt>
which produce plots of 1,2,3,4,6,12,20, and 30 pairs of scatter plots in 
separate panels.  To run any one, say the 2-panel plot, then do the following,
<p>
<tt> 
cd data/splot <br>
cp cmds/splot.cmd2 splot.cmd <br>
splot-x <br>
</tt>
<p>
This will produce the following plot.
<p>
<IMG SRC="splot_figs/s2.gif" align=center ALT="S-plot figure" >
<p>
The models are colour coded by the data fit using the colour scheme defined
in file <i> pal.in</i>. <p>
A similar 6-panel plot can be obtained with<p>
<tt> cp cmds/splot.cmd6 splot.cmd <br>
splot-x </tt> <br>
<p>
which gives
<p>
<IMG SRC="splot_figs/s6.gif" align=center ALT="S-plot figure" >
<p>
The input file for the 2-panel plot looks like this: <br>
<font color="#000088" size=-1>
<ul>
<P><TT>#&nbsp;</TT>
<BR><TT># Command file for program splot&nbsp;</TT>
<BR><TT>#&nbsp;</TT>
<BR><TT>na.nad&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
name of input nad file&nbsp;</TT>
<BR><TT>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
number of plots&nbsp;</TT>
<BR><TT>13,17&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : x,y variables for first
plot&nbsp;</TT>
<BR><TT>15,10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : x,y variables for next
plot&nbsp;</TT>
<BR><TT>3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
pen for true model symbol&nbsp;</TT>
<BR><TT>4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
pen for best model symbol&nbsp;</TT>
<BR><TT>0. 70. 0.0 &nbsp: min, max, isw [Minimum and
maximum percentiles (isw=0) or misfit (isw=1) for colour map]&nbsp;</TT>
<BR><TT>21 40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : First and last pen
for colourmap&nbsp;</TT>
<BR><TT>Title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
: Title string goes here&nbsp;</TT>
<BR><TT>4. 16. 1.0 1.0 &nbsp; : x, y, size of title text for PS, X 
(These are multiplication factors of the default size)&nbsp;</TT>
<BR><TT>1.0 1.0&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 
Size of text for PS, X
(These are multiplication factors of the default size)&nbsp;</TT>
<BR><TT>1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : Size of symbols
(x default size)&nbsp;</TT>
<BR><TT>1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : Size of model
dots (x default size)&nbsp;</TT>
<BR><TT>2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :
Frame type (0=simple frame; 1=frame with max and min only;&nbsp;</TT>
<BR><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;
2=annotated frame with options read from ranges.in)&nbsp;</TT>
</ul>

<p>
</font>
Note that a pair of variables must be specified (1 pair per line) for 
each panel in the plot. Three types of frame are possible and are controlled
by the parameter on the last line. If frametyp = 0 then each frame is 
a simple box with
no annotation; = 1 then maximum and minimum labels are added to each axis;
= 2 and a fully annotated frame is produced using variables read in from
file <i>ranges.in</i>. (See example files for details of annotation parameters.)
<p>

The file <i>finetune</i> can be used to adjust the position of the two
axes labels and numbers in the postscript plot (See example files for details). 
This will usually be necessary to produce presentable postscript figures.
<p>

<A NAME="refs"></A>
<IMG SRC="Images/colorbar.gif" ALT="-----">
<br>
</ul>
<p>
References:

<ul>
The Neighbourhood algorithm for searching a multi-dimensional parameter space
for models (points) with `acceptable data fit' is implemented
in the program <i> NA-sampler</i>, and is described in the paper:
   
<p>
<i> Geophysical Inversion with a Neighbourhood Algorithm I - 
Searching a parameter space, <br> Sambridge, M., Geophys. J. Int., <b> 138</b>,
479-494, 1999</i>.

<p>
A related paper describes the Neighbourhood re-sampling algorithm
(implemented in program <i>NA-Bayes </i>) for 
calculating Bayesian integrals from a finite set of samples produced
by the NA algorithm or any other search method (e.g. GA or SA etc.).
   
<p>
<i> Geophysical Inversion with a Neighbourhood Algorithm II - Appraising 
the ensemble, <br> Sambridge, M., Geophys. J. Int., <b>138</b>, 1999</i>.

<p>
Postscript files of these papers can be downloaded from the 
<a href="http://rses.anu.edu.au/~malcolm/NA/na.html">NA homepage</a>.
</ul>

<IMG SRC="Images/colorbar.gif" ALT="-----">
<p>
Related sites:

<ul>
<li><a href="http://rses.anu.edu.au/~malcolm/NA/na.html">NA homepage</a> 
</li>

<li><a href="http://rses.anu.edu.au/~malcolm">Malcolm's homepage</a> </li>

</ul>

<IMG SRC="Images/colorbar.gif" ALT="-----"><br>
<br>Enquires to Malcolm Sambridge: <A HREF="mailto:malcolm@rses.anu.edu.au">
<EM>malcolm@rses.anu.edu.au</EM></A><br>
<IMG SRC="Images/colorbar.gif" ALT="-----">


</td>
</tr>
</table>

</body>
</html>

